<!DOCTYPE html><html><head><meta http-equiv="Content-Type"content="text/html; charset=utf-8"/><title>flacon</title><!--Babylon.js--><script src="https://cdn.babylonjs.com/babylon.js"></script><script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script><script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script><style>html,body{overflow:hidden;width:100%;height:100%;margin:0;padding:0;}#renderCanvas{width:100%;height:100%;touch-action:none;}#canvasZone{width:100%;height:100%;}</style></head><body><canvas id="renderCanvas"></canvas><script>var canvas=document.getElementById("renderCanvas");var startRenderLoop=function(engine,canvas){engine.runRenderLoop(function(){if(sceneToRender&&sceneToRender.activeCamera){sceneToRender.render();}});};var engine=null;var scene=null;var sceneToRender=null;var createDefaultEngine=function(){return new BABYLON.Engine(canvas,true,{preserveDrawingBuffer:true,stencil:true,disableWebGL2Support:false});};var createScene=async function(){var scene=new BABYLON.Scene(engine);scene.clearColor=new BABYLON.Color3(0,0,0);const camera=new BABYLON.ArcRotateCamera("camera",-Math.PI/1.0,Math.PI/2.5,30,new BABYLON.Vector3(0,5,0));camera.attachControl(canvas,true);camera.lowerBetaLimit=0.1;camera.upperBetaLimit=2;camera.lowerRadiusLimit=10;camera.upperRadiusLimit=30;camera.lowerBetaLimit=0*Math.PI;camera.upperBetaLimit=Math.PI/2.0;const light=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(-1,1,-1));const light1=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(1,1,1));light.intensity=0.4;light1.intensity=0.7;var sotok=50;const skybox=BABYLON.MeshBuilder.CreateBox("skyBox",{size:sotok*4},scene);const skyboxMaterial=new BABYLON.StandardMaterial("skyBox",scene);skyboxMaterial.backFaceCulling=false;skyboxMaterial.reflectionTexture=new BABYLON.CubeTexture("textures/skybox/TropicalSunnyDay",scene);skyboxMaterial.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE;skyboxMaterial.diffuseColor=new BABYLON.Color3(0,0,0);skyboxMaterial.specularColor=new BABYLON.Color3(0,0,0);skybox.material=skyboxMaterial;var ground=BABYLON.Mesh.CreateGround("ground_S",1.5*sotok,1.5*sotok,1500,scene,false);ground.position=new BABYLON.Vector3(0,-0.7,0);var furMaterial=new BABYLON.FurMaterial("fur_S",scene);furMaterial.highLevelFur=false;furMaterial.furLength=0.6;furMaterial.furAngle=Math.PI/6;furMaterial.furColor=new BABYLON.Color3(0.09,0.8,0.87);ground.material=furMaterial;var shirtMaterial=new BABYLON.StandardMaterial("shirtMat",scene);shirtMaterial.diffuseColor=new BABYLON.Color3(1,0,1);shirtMaterial.ambientColor=new BABYLON.Color3(1,0,1);var shirtMatCap=new BABYLON.StandardMaterial("shirtMatCap ",scene);shirtMatCap.diffuseColor=new BABYLON.Color3(1,0,1);shirtMatCap.emissiveColor=new BABYLON.Color3(1,0,1);var matLable=new BABYLON.StandardMaterial("matLable",scene);matLable.diffuseTexture=new BABYLON.Texture("textures/gilt.jpg",scene);matLable.emissiveTexture=new BABYLON.Texture("textures/gilt.jpg",scene);var matinviz=new BABYLON.StandardMaterial("matinviz",scene);matinviz.alpha=0;let bottle=BABYLON.SceneLoader.ImportMeshAsync("","models/","flacon44.glb",scene).then((result)=>{result.meshes[0].scaling=new BABYLON.Vector3(60,60,60);result.meshes[0].rotation=new BABYLON.Vector3(0,-Math.PI/2,0);result.meshes[0].position=new BABYLON.Vector3(0,7,0);result.meshes[0].getDescendants().forEach((mesh)=>{if(mesh.name=="Part1"){scene.getMeshByName("Part1").material=shirtMatCap;scene.getMeshByName("polySurface10").material=shirtMatCap;scene.getMeshByName("polySurface9").material=shirtMaterial;scene.getMeshByName("Part2").material=matLable;scene.getMeshByName("Part5").material=matLable;scene.getMeshByName("Part6").material=matLable;}})});let advancedTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI",true,scene);let loadedGUI=await advancedTexture.parseFromURLAsync("assets/guiTexture.json");let image01=advancedTexture.getControlByName("Image01");let image02=advancedTexture.getControlByName("Image02");let image03=advancedTexture.getControlByName("Image03");let image04=advancedTexture.getControlByName("Image04");let image05=advancedTexture.getControlByName("Image05");let image11=advancedTexture.getControlByName("Image11");let image22=advancedTexture.getControlByName("Image22");let image33=advancedTexture.getControlByName("Image33");let matPicker=advancedTexture.getControlByName("ColorPicker");image01.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image01.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image02.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image02.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image03.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image03.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image11.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image11.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image22.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image22.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image33.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image33.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image01.onPointerUpObservable.add(function(){matLable.diffuseTexture=new BABYLON.Texture("textures/gilt.jpg",scene);matLable.emissiveTexture=new BABYLON.Texture("textures/gilt.jpg",scene);});image02.onPointerUpObservable.add(function(){matLable.diffuseTexture=new BABYLON.Texture("textures/marble.jpg",scene);matLable.emissiveTexture=new BABYLON.Texture("textures/marble.jpg",scene);});image03.onPointerUpObservable.add(function(){matLable.diffuseTexture=new BABYLON.Texture("textures/larka.jpg",scene);matLable.emissiveTexture=new BABYLON.Texture("textures/larka.jpg",scene);});image11.onPointerUpObservable.add(function(){scene.getMeshByName("Part2").material=matinviz;scene.getMeshByName("Part5").material=matinviz;scene.getMeshByName("polySurface10").material=shirtMatCap;});image22.onPointerUpObservable.add(function(){scene.getMeshByName("polySurface10").material=matinviz;scene.getMeshByName("Part2").material=matLable;scene.getMeshByName("Part5").material=matLable;});image33.onPointerUpObservable.add(function(){scene.getMeshByName("Part2").material=matLable;scene.getMeshByName("Part5").material=matLable;scene.getMeshByName("polySurface10").material=shirtMatCap;});matPicker.onValueChangedObservable.add(function(value){shirtMaterial.diffuseColor=value;shirtMaterial.ambientColor=value;shirtMatCap.diffuseColor=value;shirtMatCap.emissiveColor=value;});setTimeout(function(){engine.stopRenderLoop();engine.runRenderLoop(function(){scene.render();});},500);scene.registerBeforeRender(()=>{});engine.runRenderLoop(()=>scene.render());return scene;};window.initFunction=async function(){var asyncEngineCreation=async function(){try{return createDefaultEngine();}catch(e){console.log("Что то пошло не так, попробуйте позже!");return createDefaultEngine();}}
window.engine=await asyncEngineCreation();if(!engine)throw'Проблема с движком!';startRenderLoop(engine,canvas);window.scene=createScene();};initFunction().then(()=>{scene.then(returnedScene=>{sceneToRender=returnedScene;});});window.addEventListener("resize",function(){engine.resize();});</script></body></html>